# [1주차] MyAcademy팀 진행상황 공유

<br>

## 👨‍👩‍👧‍👦팀 구성원, 개인 별 역할

<br>

------

- 윤인규 (PM) : 프로젝트 일정 관리,  개발
- 권오석 (CTO) : ERD 제작, 코드 컨벤션 관리,  개발
- 이가현 (인프라) : GitLab CI/CD 파이프라인 구축, EC2 인스턴스 관리,  개발
- 박태근 (테스트) : 테스트 코드 환경 세팅,  개발
- 최승호 (기획) : 추가 기능 기획, UI 디자인 제안,  개발

<br>

## 🕐 팀 내부 회의 진행 회차 및 일자

<br>

------

모든 인원이 매일 아침 9시~ 10시 회의 진행

<br>

## 🌈 개인별 역할과 현재까지 개발 과정 요약

<br>

------

### 권오석

<br>

- 전체적인 주제 아이디어 흐름 구상을 하고, 팀원들과 협의해서 수정했음

- 초기 ERD 작성 및 수정되는 부분 계속 반영 담당

- 강사, 강좌 기본 기능 구현 완료

- 학생-수강 관련 기능 구현 중 결제 테이블과 연관관계 설정하는 부분에서 문제 생김

  → 피드백 시간 이후에 결론나오면 진행 예정

- 이번주 내로 학생-수강 및 대기번호 기능 구현해볼 예정

<br>

### 윤인규

<br>

- UI 템플릿 적용 및 메인, 로그인, 회원가입 화면 구현 (기능 연결은 아직)

- 스프링 시큐리티 등급에 따른 엔드포인트 요청 제한 설정 (ROLE, STAFF, USER)

- 구글, 네이버 소셜 로그인 연동 → DB에 사용자 데이터 저장 까지는 구현

- 관리자 계정이 직원 등급 변경할 수 있는 기능, 계정 삭제, 모든 계정 조회 구현

<br>

### 이가현

<br>

- GitHub에서 GitLab으로 미러링해서 CI 적용

- 결제 파트 진행중

- 결제 api 를 이용해서 결제창 올리는 front 쪽은 진행 완료된 상태

- 백엔드에서  검증과정 작성 중이고 , 데이터 받아서 front로 넘겨주는 과정 중

- 이번주에 작업 마무리하고 다음 주에는 학원정책에 따라 할인도 적용해볼 것

<br>

### 박태근

<br>

개발과정 요약 :

- 담당 도메인 기초 CRUD 구현

  → front에서 원하는 response가 있으면 수정 할 예정

    - 학생정보 CRUD 구현
    - 학부모정보 CRUD 구현
    - 학생특이사항 CRUD 구현

- 사내 채팅 기능 정보 찾는 중

    - 웹소켓
    - 채팅 정보가 저장되는 과정, 등

<br>

어려웠던 점 :

- 학부모(one) 학생(many)로 연관관계가 정해져있는데, 학생 정보를 등록 할 때, 학부모가 null 일 경우, 학생 정보를 조회 할 때, 학부모정보를 가져오지 못했던 부분에 문제가 있어서, 학부모가 null일 때  처리를 어떻게 할지 고민 이었음.
  프론트에서 입력받을 때, 학부모 등록 → 학생 등록 순으로 방법을 바꾸어서 해결됨.

<br>

### 최승호

<br>

- 팀프로젝트이기 때문에 협업시 다른 팀원이 알기 쉽도록 `Academy도메인`에 관련된 CRUD를 구현하는 과정에서 주석을 달고, 로그를 찍었다.

- TDD방식이 기능추가나 변경에 있어 장점이 있다는 생각이 들어서 `테스트코드`도 작성해가며 기능구현을 진행했다.

- 하지만 프로젝트에서 구현하고자 하는 목적이 다른 방향으로 수정되어 `Academy도메인`이 불필요해졌다.

- 앞으로도 도메인 간 연관관계가 바뀌면, ERD나 각 테이블의 필드값도 변경될 수 있음을 염두에 두고 개발을 해야 되겠다는 생각이 들었다.

- 그래서 일단은 기능 구현만 해놓고 추후 리팩토링을 해서 변경된 사항을 추가 및 변경해야겠다.

- `Employee도메인`에 관련된 CRUD를 구현할 때는 기능구현을 우선으로 삼고 개발을 진행했고, 이메일 인증이나, 이메일로 비밀번호 변경과 같은 기능이 완전히 추가되고 나면 주석이나 로그를 추가하고 테스트코드를 작성하는 방식으로 개발을 했다.

<br>

## 개발 과정에서 나왔던 질문 (최소 200자 이상)

<br>

------

<br>

### 1️⃣ 다대다 관계의 문제점은 무엇일까?

<br>

<img src="https://raw.githubusercontent.com/buinq/imageServer/main/img/image-20230120150924356.png" alt="image-20230120150924356" style="zoom: 150%;" />

학생인 `홍길동`은 `S1, S2` 여러개의 과목을 갖는다.

과목 `S2`는 `홍길동과 장길산` 여러개의 학생을 갖는다.

즉 `다대다` 관계를 갖는다.

위 테이블을 보면 기본키가 없다. (튜플을 하나 또는 조합된 속성으로 구분할 방법이 없다.)

<img src="https://raw.githubusercontent.com/buinq/imageServer/main/img/image-20230120150833708.png" alt="image-20230120150833708" style="zoom: 80%;" />

따라서 1:N 그리고 M:1 로 나눠서 다대다 관계를 풀어줘야한다.

<br>

### 2️⃣ JWT 토큰은 Local Storage vs Cookie 어디에 저장하는게 좋을까?

<br>

고민하는 이유 → jwt는 개인정보나 다름없기 때문에, 더 좋은 위치에 저장하는게 맞는것 같아서

<br>

### 💡 localStorage에 저장

<br>

1. 장점

- CSRF 공격에 안전하다. (이미지를 클릭하면 게시글을 쓰게끔 조작한뒤, 피해자는 웹 상 그냥 이미지인 줄 알고 눌렀더니, 피해자가 요청하지도 않은 게시글이 쓰이는 경우)
    - 자동으로 request에 담기는 쿠키와는 다르게 js코드에 의해서 헤더에 담기므로

1. 단점

- XSS에 취약하다. (code injection attack : 공격자가 악의적인 js 코드를 피해자 웹 브라우저에서 실행시키는 것 )
    - 공격자가 localStorage에 접근하는 코드 한 줄만 주입하면 localStorage를 내 집 처럼 드나들수 있다.

<br>

### 💡 Cookie에 저장

<br>

1. 장점

- localStorage에 비해 XSS 공격으로부터 안전하다.
    - 쿠키의 httpOnly 옵션을 사용하면 JS로 쿠키에 접근할 수 없다.
    - 단, 100% 안전한 것은 아니다. 쿠키의 내용을 볼 수 없을 뿐이지, 항상 자동으로 request에 담기는 쿠기의 특성상 요청을 위조할 수는 있다.

1. 단점

- CSRF 공격에 취약하다.
    - 자동으로 request에 담아서 보내기 때문에, 공격자가 request url만 안다면 사용자 관련 link를 클릭하도록 유도하여 request를 위조하기 쉽다.

보안상으로는 samesite 속성에 strict나 lax 라는 설정을 주면 서버만이 토큰을 저장할 수 있도록 할 수 있고 secure 속성으로 https 통신에서만 쿠키를 사용할 수 있도록 할 수 있다고 한다.

일단은 쿠키에 저장해서 정보를 노출하지 않는 편이 좋다고 판단을 했다.

<br>

### 3️⃣ 학원 결제 시스템 어떤 식으로 진행 될까?

<br>

🤔 아이디어톤 전

- 이용자가 결제하는 시스템
- ex :  일반 이커머스, 인프런같은 강의 사이트

→ 간단하게 이용자가 결제하고 싶은 아이템 선택 후, 결제 정보 기입하고 결제 api 연동

🤭 아이디어톤 이후

- 관리자가 결제를 진행하는 시스템
- ex :  학원 관리 프로그램

→ 관리자가 결제 금액 조회, 할인 적용, 미납금액 산정 후,

학생이나 학부모에게 결제를 어떻게 진행하도록 해야하는지 의문….

(지금 진행 방향은 현장방문시 tosspay 결제  qr 보여주기, 가상계좌 발급 후, 문자보내드리기)

<br>

## 📌 개발 결과물 공유

<br>

------

Github Repository URL : https://github.com/mutsa-team6/myacademy

로그인 UI :

![image-20230120150709616](https://raw.githubusercontent.com/buinq/imageServer/main/img/image-20230120150709616.png)



Swagger URL : http://ec2-3-39-195-170.ap-northeast-2.compute.amazonaws.com:8080/swagger-ui/index.html#/

![image-20230120150737040](https://raw.githubusercontent.com/buinq/imageServer/main/img/image-20230120150737040.png)